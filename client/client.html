
<html>

<head>
	<title>JavaScript RSA Encryption</title>
</head>

<body>
	<h1>Lab 8 Demo 1: JavaScript RSA test</h1>
    <form action="../server/server.php" method="POST">
        Enter a plaintext: <input id="message" name="message" type="text">
	<br /><br />
	RSA encryption key is defined in the Code!
	<br /><br />
    <button type="submit" onclick="RSA_encryption()">Encrypt message</button></form>
   </form>
	<script src="rsa.js"></script>
	<script type="text/javascript">
		function RSA_encryption() {
			var plaintext = document.getElementById("message").value;
			var pubilc_key = "-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAzdxaei6bt/xIAhYsdFdW62CGTpRX+GXoZkzqvbf5oOxw4wKENjFX7LsqZXxdFfoRxEwH90zZHLHgsNFzXe3JqiRabIDcNZmKS2F0A7+Mwrx6K2fZ5b7E2fSLFbC7FsvL22mN0KNAp35tdADpl4lKqNFuF7NT22ZBp/X3ncod8cDvMb9tl0hiQ1hJv0H8My/31w+F+Cdat/9Ja5d1ztOOYIx1mZ2FD2m2M33/BgGY/BusUKqSk9W91Eh99+tHS5oTvE8CI8g7pvhQteqmVgBbJOa73eQhZfOQJ0aWQ5m2i0NUPcmwvGDzURXTKW+72UKDz671bE7YAch2H+U7UQeawwIDAQAB-----END PUBLIC KEY-----";
            var encrypt = new JSEncrypt();
			encrypt.setPublicKey(pubilc_key);
			var encrypted = encrypt.encrypt(plaintext);
			document.getElementById("message").value = encrypted;
  //          console.log(document.getElementById("message").value );
			// Encrypt with the public key...
			// fetch('../public.key')
			//  .then(response => response.text())
			// .then(text => console.log(text))	
		}

		// function RSA_decryption() {

		// 	var encrypted = document.getElementById("encrypted").innerHTML;

		// 	var private_key = null;
		// 	fetch('../server/private.key')
		// 		.then(response => response.text())
		// 		.then(private_key => {
		// 			// Decrypt with the private key...
		// 			var decrypt = new JSEncrypt();
		// 			decrypt.setPrivateKey(private_key);
		// 			var decrypted = decrypt.decrypt(encrypted);

		// 			document.getElementById("decrypted").innerHTML = decrypted;
		// 		})
		// }
	</script>
</body>

</html>